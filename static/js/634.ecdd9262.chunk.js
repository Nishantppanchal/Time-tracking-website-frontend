"use strict";(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[634],{30606:function(e,t,n){var r=n(13778),i=n(2214),a=n(59286);t.Z=function(e){a.Z.get("clientProjectGet/").then((function(t){r.Z.dispatch((0,i.jm)(t.data)),e(!1)})).catch((function(t){console.error(t.response),"Invalid token header. No credentials provided."===t.response.data.detail&&(r.Z.dispatch((0,i.jm)(t.response.data.requestData.data)),e(!1))}))}},33005:function(e,t,n){var r=n(13778),i=n(6185),a=n(59286);t.Z=function(e){a.Z.get("CRUD/tags/").then((function(t){r.Z.dispatch((0,i.me)(t.data)),e(!1)})).catch((function(t){console.log(t),"Invalid token header. No credentials provided."===t.response.data.detail&&(r.Z.dispatch((0,i.me)(t.response.data.requestData.data)),e(!1))}))}},3634:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var r=n(74165),i=n(1413),a=n(15861),o=n(70885),s=n(46508),u=n(72791),l=n(68439),d=n(87462),c=n(63366),f=n(18875),p=n(13967),m=n(4999),h=n(42071),g=n(80184),Z=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],x={entering:{transform:"none"},entered:{transform:"none"}},v=u.forwardRef((function(e,t){var n=(0,p.Z)(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},i=e.addEndListener,a=e.appear,o=void 0===a||a,s=e.children,l=e.easing,v=e.in,y=e.onEnter,E=e.onEntered,j=e.onEntering,P=e.onExit,C=e.onExited,b=e.onExiting,S=e.style,T=e.timeout,D=void 0===T?r:T,L=e.TransitionComponent,R=void 0===L?f.ZP:L,k=(0,c.Z)(e,Z),w=u.useRef(null),I=(0,h.Z)(s.ref,t),A=(0,h.Z)(w,I),N=function(e){return function(t){if(e){var n=w.current;void 0===t?e(n):e(n,t)}}},G=N(j),O=N((function(e,t){(0,m.n)(e);var r=(0,m.C)({style:S,timeout:D,easing:l},{mode:"enter"});e.style.webkitTransition=n.transitions.create("transform",r),e.style.transition=n.transitions.create("transform",r),y&&y(e,t)})),F=N(E),q=N(b),B=N((function(e){var t=(0,m.C)({style:S,timeout:D,easing:l},{mode:"exit"});e.style.webkitTransition=n.transitions.create("transform",t),e.style.transition=n.transitions.create("transform",t),P&&P(e)})),M=N(C);return(0,g.jsx)(R,(0,d.Z)({appear:o,in:v,nodeRef:w,onEnter:O,onEntered:F,onEntering:G,onExit:B,onExited:M,onExiting:q,addEndListener:function(e){i&&i(w.current,e)},timeout:D},k,{children:function(e,t){return u.cloneElement(s,(0,d.Z)({style:(0,d.Z)({transform:"scale(0)",visibility:"exited"!==e||v?void 0:"hidden"},x[e],S,s.props.style),ref:A},t))}}))})),y=n(4708),E=n(10703),j=n(61889),P=n(20890),C=n(8093),b=n(11304),S=n(1688),T=n(56125),D=n(73700),L=n(59286),R=n(30606),k=n(33005),w=n(60364),I=n(72597),A=n(59860),N=n(16871),G=n(15098),O=n(5972),F=n(47047);var q=function(){return(0,g.jsx)(F.Z,{sx:{padding:"1rem",margin:"1rem",width:"calc(100% - 2rem)",height:"165.50px"}})};var B=function(){var e=(0,w.I0)(),t=400,n=(0,I.Z)(),d=(0,w.v9)((function(e){return e.tags.value})),c=(0,w.v9)((function(e){return e.CPData.value})),f=(0,w.v9)((function(e){return e.mode.value})),p=(0,w.v9)((function(e){return e.reportData.value})),m=(0,u.useState)([]),h=(0,o.Z)(m,2),Z=h[0],x=h[1],F=(0,u.useState)(""),B=(0,o.Z)(F,2),M=B[0],U=B[1],V=(0,u.useState)([]),J=(0,o.Z)(V,2),Q=J[0],X=J[1],z=(0,u.useState)(""),H=(0,o.Z)(z,2),K=H[0],W=H[1],Y=(0,u.useState)(!(c.length>0)),$=(0,o.Z)(Y,2),_=$[0],ee=$[1],te=(0,u.useState)(!(d.length>0)),ne=(0,o.Z)(te,2),re=ne[0],ie=ne[1],ae=(0,u.useState)(p.report),oe=(0,o.Z)(ae,2),se=oe[0],ue=oe[1],le=(0,u.useState)(p.reportGenerated),de=(0,o.Z)(le,2),ce=de[0],fe=de[1],pe=(0,u.useState)(!0),me=(0,o.Z)(pe,2),he=me[0],ge=me[1],Ze=(0,u.useState)(!1),xe=(0,o.Z)(Ze,2),ve=xe[0],ye=xe[1],Ee=(0,u.useState)(p.timeProgress),je=(0,o.Z)(Ee,2),Pe=je[0],Ce=je[1],be=(0,u.useState)(p.CPPieColours),Se=(0,o.Z)(be,2),Te=Se[0],De=Se[1],Le=(0,u.useState)(p.billableArray),Re=(0,o.Z)(Le,2),ke=Re[0],we=Re[1],Ie=(0,b.D)(),Ae=(0,b.D)(),Ne=(0,N.s0)();function Ge(){return Ge=(0,a.Z)((0,r.Z)().mark((function t(n){var i,a,o,s,u,l,d,c,f,p,m,h,g,x,v;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n.preventDefault(),i=[],a=[],o=0;o<Z.length;o++)"clients"===(s=Z[o]).type?i.push(s):a.push(s);return ye(!0),t.next=7,L.Z.post("generateReport/",{clients:i,projects:a,tags:Q}).then((function(e){return ue(e.data),ye(!1),fe(!0),console.log(e.data),e.data})).catch((function(e){if("Invalid token header. No credentials provided."===e.response.data.detail)return ue(e.response.data.requestData.data),ye(!1),fe(!0),e.response.data.requestData.data}));case 7:if(u=t.sent,l=[],u.logs.length>0){for(d=D.ou.fromFormat(u.logs[0].date,"yyyy-LL-dd"),c=D.ou.fromFormat(u.logs[u.logs.length-1].date,"yyyy-LL-dd"),f=D.Xp.fromDateTimes(d,c).length("days"),p={},m=0;m<=f;m++)h=d.plus({days:m}).toFormat("yyyy-LL-dd"),p[h]=0;u.logs.forEach((function(e){p[e.date]+=e.time})),Object.entries(p).forEach((function(e){l.push({date:e[0],time:e[1]})}))}Ce(l),g=[{name:"Billable",number:0},{name:"Unbillable",number:0}],u.logs.forEach((function(e){!0===e.billable?g[0].number+=1:g[1].number+=1})),we(g),x=Oe(u),De(x),v=(0,I.Z)(),e((0,O.p7)({oldTheme:v,report:u,timeProgress:l,billableArray:g,CPPieColours:x,reportGenerated:!0}));case 18:case"end":return t.stop()}}),t)}))),Ge.apply(this,arguments)}function Oe(e){var t=[];(e.CPTimes.length>=e.tagTimes.length?e.CPTimes:e.tagTimes).forEach((function(){var e=Fe(t);t.push(e)}));var r="light"===n.palette.mode?[20,50]:[50,80],i=(0,o.Z)(r,2),a=i[0],s=i[1];return t=t.map((function(e){return"hsl("+e+", 60%, "+qe(a,s)+"%)"})),De(t),t}function Fe(e){var t=qe(360,1);return e.find((function(e){return e>=t-150&&e<=t+150}))?Fe(e):t}function qe(e,t){return Math.floor(Math.random()*(t-e)+e)}return(0,u.useEffect)((function(){!0===_&&(0,R.Z)(ee),re&&(0,k.Z)(ie)}),[]),(0,u.useEffect)((function(){ce?setTimeout((function(){ge(!1)}),500):ge(!0)}),[ce]),(0,u.useEffect)((function(){Oe(se)}),[f]),_||re?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(y.ZP,{}),(0,g.jsx)(s.Z,{page:"reports"}),(0,g.jsx)(q,{})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(y.ZP,{}),(0,g.jsx)(s.Z,{page:"reports"}),(0,g.jsx)(T.Z,{in:he,timeout:t,children:(0,g.jsx)(v,{in:!ce,timeout:t,style:{transitionDelay:ce?"0ms":String(500)+"ms"},children:(0,g.jsx)(E.Z,{sx:{margin:"1rem 1rem 0rem",padding:"1rem"},children:(0,g.jsxs)(j.ZP,{container:!0,spacing:2,children:[(0,g.jsx)(j.ZP,{item:!0,xs:12,children:(0,g.jsx)(P.Z,{variant:"h6",width:"100%",align:"center",children:"GENERATE REPORT"})}),(0,g.jsx)(j.ZP,{item:!0,xs:6,children:(0,g.jsx)(S.Z,{multiple:!0,id:"CP",options:c,getOptionLabel:function(e){return e.name},groupBy:function(e){return e.type},filterOptions:Ie,renderInput:function(e){return(0,g.jsx)(C.Z,(0,i.Z)((0,i.Z)({},e),{},{label:"CLIENTS AND PROJECTS",variant:"outlined"}))},onChange:function(e,t){x(t)},value:Z,onInputChange:function(e,t){U(t)},inputValue:M})}),(0,g.jsx)(j.ZP,{item:!0,xs:6,children:(0,g.jsx)(S.Z,{multiple:!0,id:"tags",options:d,getOptionLabel:function(e){return e.name},filterOptions:Ae,renderInput:function(e){return(0,g.jsx)(C.Z,(0,i.Z)((0,i.Z)({},e),{},{label:"TAGS",variant:"outlined"}))},onChange:function(e,t){X(t)},value:Q,onInputChange:function(e,t){W(t)},inputValue:K})}),(0,g.jsx)(j.ZP,{item:!0,xs:12,children:(0,g.jsx)("div",{style:{display:"flex",width:"100%",justifyContent:"end"},children:(0,g.jsx)(A.Z,{loading:ve,variant:"contained",onClick:function(e){return Ge.apply(this,arguments)},startIcon:(0,g.jsx)(l.Z,{}),children:"GENERATE"})})})]})})})}),(0,g.jsx)(T.Z,{in:ce,children:(0,g.jsx)("div",{style:{padding:"3rem"},children:(0,g.jsx)(G.Z,{report:se,timeProgress:Pe,billableArray:ke,CPPieColours:Te,theme:n,CPData:c,exportPage:!1,handleNewReport:function(t){t.preventDefault(),x([]),X([]),fe(!1),e((0,O.dQ)())},handleExportReport:function(){var t=(0,I.Z)();e((0,O.p7)({oldTheme:t,report:se,timeProgress:Pe,billableArray:ke,CPPieColours:Te,reportGenerated:!0})),Ne("/report-export")}})})})]})}}}]);
//# sourceMappingURL=634.ecdd9262.chunk.js.map